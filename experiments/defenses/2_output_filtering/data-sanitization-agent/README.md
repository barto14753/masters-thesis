### README: Architecture of the Medical Data Management Application

#### Description

This application consists of three main components:

1. **API Server (Flask)** – The server receives requests for patient data (e.g., medical history, medications) and generates responses based on basic data. It sends these responses to the sanitization agent if needed.
2. **Sanitization Agent (Flask)** – The agent receives responses from the API server, filters sensitive data (e.g., insurance numbers, diagnoses, patient names), and returns the sanitized response.
3. **Test Client** – A simple client that sends requests to the API server to check the responses with and without sanitization.

Communication between components happens via HTTP. Once the response is generated by the server, it is sent to the sanitization agent to remove sensitive data, and the sanitized response is returned to the server.

#### Architecture

```mermaid
graph TD;
    Client[Client (HTTP)] -->|POST /query| Server[Flask Server];
    Server -->|Generate response| ResponseGenerator["Response Generator"];
    ResponseGenerator -->|Send to sanitization agent| SanitizationAgentAPI["Sanitization Agent API"];
    SanitizationAgentAPI -->|Sanitize data| SanitizedResponse["Sanitized Response"];
    SanitizedResponse -->|Return sanitized response| Server;
    Server -->|Return response to client| Client;
```

#### Components

1. **API Server (`server.py`)**

   - Responds to user queries regarding patient data (e.g., blood type, medication list, diagnosis).
   - Generates a response based on data stored in a dictionary.
   - Sends the response to the sanitization agent (if data sanitization is required).
   - Returns the response (sanitized or not) back to the client.

2. **Sanitization Agent (`sanitization_agent.py`)**

   - Cleanses the response by removing sensitive information, such as insurance numbers, diagnoses, or patient names.
   - Filters the response using predefined patterns, replacing sensitive data with placeholders (`<<INSURANCE_NUMBER>>`, `<<NAME>>`, etc.).
   - Sends the sanitized response back to the API server.

3. **Test Client (`client.py`)**
   - Sends requests to the API server.
   - Tests both sanitized and non-sanitized responses to ensure the system functions correctly.

#### How it Works

1. **API Server** listens for queries from the client.
2. Once a query is received, the **API Server** generates a response based on patient data (e.g., medications).
3. The response is then forwarded to the **Sanitization Agent**.
4. The **Sanitization Agent** checks the response for sensitive information and replaces it with placeholders if needed.
5. The sanitized response is returned to the **API Server**, which then sends it back to the **Client**.

#### Future Extensions

- **Extend patient data** – Instead of storing patient data in a dictionary, integrate the system with a real database.
- **Enhance sanitization** – Add more patterns to detect sensitive data such as addresses, phone numbers, or medical history.
- **Security** – Add authentication and authorization to ensure that only authorized users can query the system.
